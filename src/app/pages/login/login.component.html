<div class="container center">
    <mat-progress-bar mode="indeterminate" *ngIf="showProgressBar"></mat-progress-bar>
    <mat-card class="mat-elevation-z2" *ngIf="!register">
        <mat-card-title>{{ 'general.login' | translate }}</mat-card-title>
        <mat-card-content>

            <form [formGroup]="formLogin">
                <p>
                    <mat-form-field>
                        <input type="text" matInput placeholder="{{ 'general.email' | translate }}"
                            formControlName="email">
                        <mat-icon matSuffix>email</mat-icon>
                    </mat-form-field>
                </p>

                <p>
                    <mat-form-field>
                        <input type="password" matInput placeholder="{{ 'general.password' | translate }}"
                            formControlName="password">
                        <mat-icon matSuffix>vpn_key</mat-icon>
                    </mat-form-field>
                </p>

                <p *ngIf="error" class="error">
                    {{ error }}
                </p>

                <div>
                    <div class="float-left">
                        <button (click)="showRegister()" mat-button
                            color="primary">{{ 'general.createAccount' | translate }}</button>
                    </div>

                    <div class="right">
                        <button (click)="doLogin()" mat-raised-button
                            color="primary">{{ 'general.login' | translate }}</button>
                    </div>
                </div>


            </form>
        </mat-card-content>
    </mat-card>

    <mat-card class="mat-elevation-z2" *ngIf="register">
        <mat-card-title>{{ 'general.register' | translate }}</mat-card-title>
        <mat-card-content>

            <form [formGroup]="formRegister">
                <mat-horizontal-stepper linear #stepper>
                    <mat-step>
                        <ng-template matStepLabel>{{ 'general.fillUser' | translate}}</ng-template>
                        <mat-form-field>
                            <input type="text" matInput placeholder="{{ 'general.name' | translate }}"
                                formControlName="name" maxlength="50">
                        </mat-form-field>

                        <mat-form-field>
                            <input type="text" matInput placeholder="{{ 'general.surname' | translate }}"
                                formControlName="surname" maxlength="50">
                        </mat-form-field>

                        <mat-form-field>
                            <input type="email" matInput placeholder="{{ 'general.email' | translate }}"
                                formControlName="email" maxlength="220">
                            <mat-icon matSuffix>email</mat-icon>
                        </mat-form-field>

                        <div *ngIf="formRegister.get('email').hasError('pattern')" class="error">
                            {{ 'general.invalidEmail' | translate }}
                        </div>

                        <mat-form-field>
                            <input type="password" matInput placeholder="{{ 'general.password' | translate }}"
                                formControlName="password" maxlength="60">
                            <mat-icon matSuffix>vpn_key</mat-icon>
                        </mat-form-field>

                        <mat-form-field>
                            <input type="password" matInput placeholder="{{ 'general.repeatPassword' | translate }}"
                                formControlName="repeatPassword" maxlength="60">
                            <mat-icon matSuffix>vpn_key</mat-icon>
                        </mat-form-field>
                    </mat-step>

                    
                    <mat-step>
                        <ng-template matStepLabel>{{ 'general.fillBusiness' | translate}}</ng-template>
                        <mat-form-field>
                            <input type="text" matInput placeholder="{{ 'business.name' | translate }}"
                                formControlName="business_name" maxlength="50">
                        </mat-form-field>

                        <mat-form-field>
                            <input type="email" matInput placeholder="{{ 'general.email' | translate }}"
                                formControlName="business_email" maxlength="220">
                            <mat-icon matSuffix>email</mat-icon>
                        </mat-form-field>

                        <div *ngIf="formRegister.get('business_email').hasError('pattern')" class="error">
                            {{ 'general.invalidEmail' | translate }}
                        </div>

                        <mat-form-field>
                            <input type="text" matInput placeholder="{{ 'business.address' | translate }}"
                                formControlName="business_address" maxlength="50">
                        </mat-form-field>

                        <mat-form-field>
                            <input type="text" matInput placeholder="{{ 'business.cif' | translate }}"
                                formControlName="business_cif" maxlength="50">
                        </mat-form-field>

                        <mat-form-field>
                            <input type="text" matInput placeholder="{{ 'business.phone' | translate }}"
                                formControlName="business_phone" maxlength="50">
                        </mat-form-field>

                        <re-captcha formControlName="reCaptcha" (resolved)="captchaResolved($event)" siteKey="6LcebaMZAAAAAGNrhMHXk4koQrccENpjOsrzlYpK">
                        </re-captcha>
                    </mat-step>

                </mat-horizontal-stepper>
                <p *ngIf="error" class="error">
                    {{ error }}
                </p>

                <div>
                    <div class="float-left">
                        <button (click)="showRegister()" mat-button
                            color="primary">{{ 'general.back' | translate }}</button>
                    </div>

                    <div class="right">
                        <button (click)="doRegister()" mat-raised-button
                            color="primary">{{ 'general.createAccount' | translate }}</button>
                    </div>
                </div>

            </form>
        </mat-card-content>
    </mat-card>

    <h2 class="mat-display-3 grey text-center margin-top-35">
        <svg class="logo-footer" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            aria-hidden="true" focusable="false" width="1em" height="1em"
            style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);"
            preserveAspectRatio="xMidYMid meet" viewBox="0 0 512 512">
            <path
                d="M448 273.001c-21.27 0-39.296 13.999-45.596 32.999h-38.857l-28.361-85.417a15.999 15.999 0 0 0-15.183-10.956c-.112 0-.224 0-.335.004a15.997 15.997 0 0 0-15.049 11.588l-44.484 155.262-52.353-314.108C206.535 54.893 200.333 48 192 48s-13.693 5.776-15.525 13.135L115.496 306H16v31.999h112c7.348 0 13.75-5.003 15.525-12.134l45.368-182.177 51.324 307.94c1.229 7.377 7.397 11.92 14.864 12.344.308.018.614.028.919.028 7.097 0 13.406-3.701 15.381-10.594l49.744-173.617 15.689 47.252A16.001 16.001 0 0 0 352 337.999h51.108C409.973 355.999 427.477 369 448 369c26.511 0 48-22.492 48-49 0-26.509-21.489-46.999-48-46.999z"
                fill="#D3D3D3" />
            <rect x="0" y="0" width="512" height="512" fill="rgba(0, 0, 0, 0)" /></svg>
        inTview
    </h2>
</div>